<% if route.path_info.match?(%r{\A/(?:cats(?:/\d+)?|logs|seek)?\z}) %>
<div class="options">
  <label for="lang_select">Region:</label>
  <select id="lang_select" name="lang" onchange="roll(this)">
    <option value="en" <%= selected_lang('en') %>>BCEN</option>
    <option value="tw" <%= selected_lang('tw') %>>BCTW</option>
    <option value="jp" <%= selected_lang('jp') %>>BCJP</option>
    <option value="kr" <%= selected_lang('kr') %>>BCKR</option>
  </select>

  <% if route.path_info.match?(%r{\A/(?:seek)?\z}) %>
  <label for="version_select">Version:</label>
  <select id="version_select" name="version" onchange="roll(this)">
    <option value="8.6" <%= selected_version('8.6') %>>8.6+</option>
    <option value="8.5" <%= selected_version('8.5') %>>8.5</option>
    <option value="8.4" <%= selected_version('8.4') %>>8.4</option>
  </select>
  <% else %>
  <%= hidden_inputs('version') %>
  <% end %>

  <% if route.path_info != '/logs' && !route.path_info.start_with?('/cats/') %>
  <label for="name_select">Name:</label>
  <select id="name_select" name="name" onchange="roll(this)">
    <option value="0" <%= selected_name(0) %>>Base</option>
    <option value="1" <%= selected_name(1) %>>Evolved</option>
    <option value="2" <%= selected_name(2) %>>True</option>
    <option value="3" <%= selected_name(3) %>>Ultra</option>
  </select>
  <% else %>
  <%= hidden_inputs('name') %>
  <% end %>

  <label for="ui_select">UI language:</label>
  <select id="ui_select" name="ui" onchange="roll(this)">
    <option value="" <%= selected_ui('') %>>Default</option>
    <option value="en" <%= selected_ui('en') %>>
      EN (<%= BattleCatsRolls::L10n.proofreader('en') %>)
    </option>
    <option value="tw" <%= selected_ui('tw') %>>
      TW (<%= BattleCatsRolls::L10n.proofreader('tw') %>)
    </option>
    <option value="jp" <%= selected_ui('jp') %>>
      JP (<%= BattleCatsRolls::L10n.proofreader('jp') %>)
    </option>
    <option value="kr" <%= selected_ui('kr') %>>
      KR (<%= BattleCatsRolls::L10n.proofreader('kr') %>)
    </option>
  </select>

  <% if route.path_info == '/' || route.path_info.start_with?('/cats/') %>
  <label for="theme_select">Theme:</label>
  <select id="theme_select" name="theme" onchange="roll(this)">
    <option value="" <%= selected_theme('') %>>Default</option>
    <option value="mkweb" <%= selected_theme('mkweb') %>>mkweb</option>
  </select>
  <% else %>
  <%= hidden_inputs('theme') %>
  <% end %>

  <% if route.path_info.match?(%r{\A/cats/\d+\z}) %>
  <div class="cats_options">
    <label for="level_input">Level:</label>
    <input
      type="number" id="level_input" name="level"
      value="<%= arg[:level] %>"
      min="1"
      max="<%= arg[:cat]&.max_level %>"
      onclick="this.select()">

    Growth rate: <%= growth_rate(arg[:cat]&.growth) %>

    <div class="stat_options">
      <label for="hide_wave_input">
        <input type="checkbox" id="hide_wave_input" name="hide_wave"
          <%= checked_hide_wave %>
          onchange="roll(this)">
         Hide wave/surge/explosion attacks
      </label>
      <label for="sum_no_wave_input">
        <input type="checkbox" id="sum_no_wave_input" name="sum_no_wave"
          <%= checked_sum_no_wave %>
          onchange="roll(this)">
         Discount wave/surge/explosion from DPS and damage sum
      </label>
      <label for="dps_no_critical_input">
        <input type="checkbox" id="dps_no_critical_input"
          name="dps_no_critical"
          <%= checked_dps_no_critical %>
          onchange="roll(this)">
         Discount critical strikes and savage blows from DPS
      </label>
    </div>
  </div>
  <% else %>
    <%= hidden_inputs('level', 'hide_wave',
      'sum_no_wave', 'dps_no_critical') %>
  <% end %>

  <% if route.path_info == '/cats' %>
  <div class="cats">
    <%=
      header(1,
        %Q{Show me all cats (<a href="#{uri_to_own_all_cats}">Own all cats!</a>) (<a href="#{uri_to_drop_all_cats}">Drop them all!</a>)},
        'show-me-all-cats')
    %>

    <div class="cats_filters">
      <table>
        <tr>
          <th>For</th>
          <th>Against</th>
        </tr>
        <tr>
          <td>
            <label for="for-all">
              <input type="radio" id="for-all" name="for" value="all"
               onchange="roll(this)" <%= checked_for('all') %>>
              All
            </label>
            <label for="for-any">
              <input type="radio" id="for-any" name="for" value="any"
               onchange="roll(this)" <%= checked_for('any') %>>
              Any
            </label>
          </td>
          <td>
            <% BattleCatsRolls::Ability::Specialization::List.each do |type| %>
              <label for="<%= type %>">
                <input type="checkbox" name="against" id="<%= type %>"
                 value="<%= type %>" onchange="roll(this)"
                 <%= checked_against(type) %>>
                <%= l10n(type.capitalize) %>
              </label>
            <% end %>
          </td>
        </tr>
        <tr>
          <th>While</th>
          <th>Having</th>
        </tr>
        <tr>
          <td>
            <label for="while-all">
              <input type="radio" id="while-all" name="while" value="all"
               onchange="roll(this)" <%= checked_while('all') %>>
              All
            </label>
            <label for="while-any">
              <input type="radio" id="while-any" name="while" value="any"
               onchange="roll(this)" <%= checked_while('any') %>>
              Any
            </label>
          </td>
          <td>
            <% BattleCatsRolls::Filter.keys.each do |filter| %>
            <label for="<%= filter %>">
              <input type="checkbox" name="having" id="<%= filter %>"
               value="<%= filter %>" onchange="roll(this)"
               <%= checked_having(filter) %>>
              <%= l10n(filter.capitalize.tr('_', ' ')) %>
            </label>
            <% end %>
          </td>
        </tr>
      </table>
    </div>

    <div class="cats_listing">
    <% each_cats_by_rarity(arg[:cats_by_rarity]) do |rarity, cats| %>
      <%= header(2, BattleCatsRolls::Cat.wiki_rarity_label(rarity)) %>
      <div class="cats_by_rarity">
        <% cats.reverse_each do |c| %>
        <label for="cat-<%= c.id %>">
          <input type="checkbox" onchange="roll(this)"
            name="t" id="cat-<%= c.id %>" value="<%= c.id %>"
            <%= checked_cat(c) %>>
          <%= link_to_roll(c) %>
        </label>
        <% end %>
      </div>
    <% end %>
    </div>
  </div>
  <% end %>
</div>
<% else %>
<%= hidden_inputs('level', 'lang', 'version', 'name',
  'hide_wave', 'sum_no_wave', 'dps_no_critical') %>
<% end %>

<%= hidden_inputs('o') %>
